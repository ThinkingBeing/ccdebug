# 图书管理功能需求分析文档

## 需求基本信息
- 需求主题：图书管理功能开发
- 原始需求：图书管理功能模块开发，包含图书信息的增删改查功能
- 创建时间：2025-10-23T08:38:51.147Z
- 会话ID：036965f8-7ed7-4a6c-9afb-0b90c27baaf7

## 1.应用（系统）信息

**原始需求**：基于图书管理系统开发图书管理功能

**开发指令**：当前已存在图书管理系统应用，无需新建应用，直接在现有应用基础上进行开发

**需求类型**：应用依赖信息

**应用ID（applicationGuid）**：44113e51-381f-54d9-0071-3a1ce2fd8e1f

**应用名称（applicationName）**：图书管理系统

**应用编码（application）**：x_0338

**应用简称（shortName）**：tsglxt

## 2.模块（业务单元）信息

**原始需求**：需要创建图书管理模块和图书信息子模块

**开发指令**：需要 myfunction-agent 按照下面的内容完成模块需求开发

**需求类型**：新增模块

### 2.1 图书管理模块（一级模块）

**模块名称（functionName）**：图书管理

**模块类型（level）**：0（分组）

**模块编码（functionCode）**：x_033810

**模块ID（functionGUID）**：034eb5d0-a012-4709-8cab-771a73be7221

**父级模块ID（parentFunctionGuid）**：无（一级模块）

**父级模块编码（parentHierarchyCode）**：无（一级模块）

### 2.2 图书信息模块（二级模块）

**模块名称（functionName）**：图书信息

**模块类型（level）**：1（业务单元）

**模块编码（functionCode）**：x_03381001

**模块ID（functionGUID）**：47aaa7f6-55ea-485d-82ad-3acee93988ec

**父级模块ID（parentFunctionGuid）**：034eb5d0-a012-4709-8cab-771a73be7221

**父级模块编码（parentHierarchyCode）**：x_033810

**模块主页信息**：
- pageId：f8d44297-ac4f-462b-a187-16ab863495d5（图书信息列表页面）

## 3.数据表信息

**原始需求**：需要创建图书信息表，存储图书的基本信息

**开发指令**：需要 entity-agent 按照下面的内容完成数据表需求开发

**需求类型**：新增表

**Entity文件路径**：code/Entity/cb9cc832-46a7-4a24-92e3-2231f2f9745b.json

**entityName 数据表英文名**：x图书信息274qq2

**displayName 数据表中文名**：图书信息

**entityId**：cb9cc832-46a7-4a24-92e3-2231f2f9745b

**primaryKeyName**：图书信息GUID

**表关系**：单表结构，无关联关系

**字段列表**：

| 字段中文名 | 字段英文名 | 字段类型 | 备注及说明 |
|----------|-----------|---------|----------|
| 图书信息主键 | 图书信息GUID | 主键 | 图书信息唯一标识 |
| ISBN编号 | x_isbn | 单行文本 | 图书ISBN编号，唯一标识 |
| 书名 | x_bookName | 单行文本 | 图书书名 |
| 作者 | x_author | 单行文本 | 图书作者 |
| 出版社 | x_publisher | 单行文本 | 图书出版社 |

## 4.业务参数信息

**原始需求**：无业务参数相关需求

**开发指令**：无需开发业务参数

**需求类型**：无

**说明**：当前需求中未涉及业务参数相关内容，无需进行业务参数开发

## 5.页面信息

### 5.1 列表页面

**原始需求**：图书信息列表页面，支持查询和操作功能

**开发指令**：需要 grid-agent 按照上面的内容完成列表页面需求开发

**需求类型**：新增页面

**基本信息（必需）**：
- FunctionPage文件路径：code/FunctionPage/f8d44297-ac4f-462b-a187-16ab863495d5.json
- functionPageId：f8d44297-ac4f-462b-a187-16ab863495d5
- createdTime：2025-10-23T08:38:51.147Z
- name：4afc1445-86df-47f9-b0d8-c9a5f1e91033
- url：/std/x_03381001/4afc1445-86df-47f9-b0d8-c9a5f1e91033
- AppGrid文件路径：code/AppGrid/5cdc30c0-9a51-4c2a-9e6c-5abf7b64f47f.json
- gridId：5cdc30c0-9a51-4c2a-9e6c-5abf7b64f47f
- entityId：cb9cc832-46a7-4a24-92e3-2231f2f9745b

**需求拆解**：
- **搜索相关**：
  - 书名：支持模糊查询
  - 作者：支持模糊查询
- **列表视图**：
  - 视图条件：默认显示所有图书信息
  - 视图显示字段：ISBN编号、书名、作者、出版社
- **操作按钮**：
  - 新增（主按钮）：打开表单页面，URL：/std/x_03381001/6f7c3257-99a6-416f-8a82-0b9628d6b62d
  - 更多：包含打印、导出功能
  - 行操作：编辑、删除
- **条件规则**：无特殊条件规则

### 5.2 表单页面

**原始需求**：图书信息表单页面，用于新增和编辑图书信息

**开发指令**：需要 form-agent 按照上面的内容完成表单页面需求开发

**需求类型**：新增页面

**基本信息（必需）**：
- FunctionPage文件路径：code/FunctionPage/6f7c3257-99a6-416f-8a82-0b9628d6b62d.json
- functionPageId：6f7c3257-99a6-416f-8a82-0b9628d6b62d
- createdTime：2025-10-23T08:38:51.147Z
- name：182b519c-5794-46af-9686-5b6861d12cf4
- url：/std/x_03381001/182b519c-5794-46af-9686-5b6861d12cf4
- AppForm文件路径：code/AppForm/182b519c-5794-46af-9686-5b6861d12cf4.json
- formId：182b519c-5794-46af-9686-5b6861d12cf4
- entityId：cb9cc832-46a7-4a24-92e3-2231f2f9745b

**需求拆解**：
- **分区/分组及分组中要显示的字段**：
  - 基本信息分组：
    - ISBN编号：x_isbn（单行文本，必填）
    - 书名：x_bookName（单行文本，必填）
    - 作者：x_author（单行文本，必填）
    - 出版社：x_publisher（单行文本，必填）
- **操作按钮**：
  - 保存：标准保存&关闭
  - 取消：关闭当前窗口
- **条件规则**：无特殊条件规则
- **表单数据保存校验规则**：
  - ISBN编号不能重复
  - 书名、作者、出版社为必填项

## 6.文件信息

### 新增文件列表：
- code/MyFunction/034eb5d0-a012-4709-8cab-771a73be7221.json（图书管理模块）
- code/MyFunction/47aaa7f6-55ea-485d-82ad-3acee93988ec.json（图书信息模块）
- code/Entity/cb9cc832-46a7-4a24-92e3-2231f2f9745b.json（图书信息表）
- code/FunctionPage/f8d44297-ac4f-462b-a187-16ab863495d5.json（图书信息列表页面）
- code/AppGrid/5cdc30c0-9a51-4c2a-9e6c-5abf7b64f47f.json（图书信息列表控件）
- code/FunctionPage/6f7c3257-99a6-416f-8a82-0b9628d6b62d.json（图书信息表单页面）
- code/AppForm/182b519c-5794-46af-9686-5b6861d12cf4.json（图书信息表单控件）

### 页面地址：
- 图书信息列表页面：http://10.20.21.14:9300/std/x_03381001/4afc1445-86df-47f9-b0d8-c9a5f1e91033
- 图书信息表单页面：http://10.20.21.14:9300/std/x_03381001/182b519c-5794-46af-9686-5b6861d12cf4

## 开发策略总结

本需求基于现有的图书管理系统（x_0338）进行开发，主要包含以下内容：

1. **模块开发**：创建图书管理（x_033810）和图书信息（x_03381001）两个业务单元
2. **数据表开发**：创建图书信息表，包含ISBN、书名、作者、出版社等字段
3. **页面开发**：创建图书信息列表页面和表单页面，支持完整的增删改查功能

开发工作需要由以下SubAgent协同完成：
- myfunction-agent：完成业务单元开发
- entity-agent：完成数据表开发
- grid-agent：完成列表页面开发
- form-agent：完成表单页面开发