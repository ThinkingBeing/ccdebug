# CCDebug - Claude Code è°ƒè¯•å·¥å…·


CCDebug æ˜¯ä¸€ä¸ªé’ˆå¯¹ Claude Codeçš„ç®€å•è°ƒè¯•å·¥å…·ï¼Œèƒ½å¤Ÿè®°å½•ã€åˆ†æå’Œå¯è§†åŒ–æ‚¨ä¸ Claude API çš„æ‰€æœ‰äº¤äº’è¿‡ç¨‹ã€‚é€šè¿‡æ‹¦æˆª HTTP è¯·æ±‚ï¼ŒCCDebug æä¾›äº†è¯¦ç»†çš„å¯¹è¯æ—¶é—´çº¿ã€å·¥å…·è°ƒç”¨è¿½è¸ªå’Œå¤šç§æ•°æ®å±•ç¤ºè§†å›¾ã€‚æœ¬é¡¹ç›®åŸºäºhttps://github.com/badlogic/lemmy/tree/main/apps/claude-traceäºŒæ¬¡å¼€å‘ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

### ğŸ” å®æ—¶äº¤äº’è®°å½•
- **HTTP æ‹¦æˆª**: è‡ªåŠ¨æ‹¦æˆªå¹¶è®°å½•æ‰€æœ‰ Claude API è¯·æ±‚å’Œå“åº”
- **æµå¼æ•°æ®æ”¯æŒ**: å®Œæ•´æ”¯æŒ Claude API çš„æµå¼å“åº”ï¼ˆSSEï¼‰å’Œ AWS Bedrock æ ¼å¼
- **æ•æ„Ÿä¿¡æ¯ä¿æŠ¤**: è‡ªåŠ¨è„±æ•å¤„ç† API å¯†é’¥ç­‰æ•æ„Ÿä¿¡æ¯

### ğŸ“Š å¤šç»´åº¦æ•°æ®å±•ç¤º
- **å¯¹è¯æ—¶é—´çº¿**: ç›´è§‚å±•ç¤ºå®Œæ•´çš„å¯¹è¯æµç¨‹å’Œå·¥å…·è°ƒç”¨é“¾
- **åŸå§‹æ•°æ®è§†å›¾**: æŸ¥çœ‹å®Œæ•´çš„ HTTP è¯·æ±‚/å“åº”è¯¦æƒ…
- **JSON ç»“æ„åŒ–è§†å›¾**: ä»¥ç»“æ„åŒ–æ ¼å¼å±•ç¤ºå¤„ç†åçš„æ•°æ®
- **Web ç•Œé¢**: ç°ä»£åŒ–çš„ Vue.js Web ç•Œé¢ï¼Œæ”¯æŒå®æ—¶æ›´æ–°

### ğŸ› ï¸ å·¥å…·è°ƒç”¨åˆ†æ
- **å·¥å…·ä½¿ç”¨è¿½è¸ª**: è¯¦ç»†è®°å½•æ¯ä¸ªå·¥å…·çš„è°ƒç”¨è¿‡ç¨‹å’Œç»“æœ
- **å‚æ•°åˆ†æ**: å±•ç¤ºå·¥å…·è°ƒç”¨çš„è¾“å…¥å‚æ•°å’Œè¾“å‡ºç»“æœ
- **æ‰§è¡Œæ—¶é—´ç»Ÿè®¡**: åˆ†æå·¥å…·æ‰§è¡Œçš„æ€§èƒ½è¡¨ç°

### ğŸ“ˆ é¡¹ç›®ç®¡ç†
- **å¤šé¡¹ç›®æ”¯æŒ**: åŒæ—¶ç®¡ç†å¤šä¸ªé¡¹ç›®çš„è°ƒè¯•æ—¥å¿—
- **æ–‡ä»¶ç›‘æ§**: å®æ—¶ç›‘æ§æ—¥å¿—æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨æ›´æ–°ç•Œé¢
- **å†å²è®°å½•**: ä¿å­˜å’ŒæŸ¥çœ‹å†å²å¯¹è¯è®°å½•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# å…¨å±€å®‰è£…
npm install -g @myskyline_ai/ccdebug

# æˆ–è€…åœ¨é¡¹ç›®ä¸­å®‰è£…
npm install @myskyline_ai/ccdebug
```

### åŸºæœ¬ä½¿ç”¨

#### 1. å¯åŠ¨ Claude å¹¶è®°å½•äº¤äº’

```bash
# åŸºæœ¬ç”¨æ³• - å¯åŠ¨ Claude å¹¶è‡ªåŠ¨è®°å½•
ccdebug

# ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶å
ccdebug --log my-session

# ä¼ é€’å‚æ•°ç»™ Claude
ccdebug --run-with chat --model sonnet-3.5
```

#### 2. å¯åŠ¨ Web æ—¶é—´çº¿ç•Œé¢

```bash
# å¯åŠ¨ Web æœåŠ¡å™¨æŸ¥çœ‹æ—¶é—´çº¿
ccdebug --serve --port 3001 --project /path/to/your/project

# åŒ…å«æ‰€æœ‰è¯·æ±‚ï¼ˆä¸ä»…ä»…æ˜¯å¯¹è¯ï¼‰
ccdebug --serve --port 3001 --project /path/to/your/project --include-all-requests
```

#### 3. ç”Ÿæˆ HTML æŠ¥å‘Š

```bash
# ä» JSONL æ–‡ä»¶ç”Ÿæˆ HTML æŠ¥å‘Š
ccdebug --generate-html conversation.jsonl report.html

# ç”Ÿæˆåè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
ccdebug --generate-html conversation.jsonl --no-open
```

#### 4. æå– OAuth Token

```bash
# æå– Claude çš„ OAuth token ç”¨äº SDK
ccdebug --extract-token
```

## ğŸ“‹ å‘½ä»¤è¡Œé€‰é¡¹

| é€‰é¡¹ | æè¿° |
|------|------|
| `--extract-token` | æå– OAuth token å¹¶é€€å‡º |
| `--generate-html` | ä» JSONL æ–‡ä»¶ç”Ÿæˆ HTML æŠ¥å‘Š |
| `--index` | ä¸º .ccdebug/ ç›®å½•ç”Ÿæˆå¯¹è¯æ‘˜è¦å’Œç´¢å¼• |
| `--serve` | å¯åŠ¨ Web æ—¶é—´çº¿æœåŠ¡å™¨ |
| `--port <number>` | æŒ‡å®š Web æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤ 3001ï¼‰ |
| `--project <path>` | æŒ‡å®šé¡¹ç›®ç›®å½•è·¯å¾„ |
| `--run-with <args>` | å°†åç»­å‚æ•°ä¼ é€’ç»™ Claude è¿›ç¨‹ |
| `--include-all-requests` | åŒ…å«æ‰€æœ‰ fetch è¯·æ±‚ï¼Œè€Œä¸ä»…ä»…æ˜¯å¯¹è¯ |
| `--no-open` | ä¸åœ¨æµè§ˆå™¨ä¸­è‡ªåŠ¨æ‰“å¼€ç”Ÿæˆçš„ HTML |
| `--log <name>` | æŒ‡å®šè‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶åŸºç¡€åç§° |
| `--claude-path <path>` | æŒ‡å®š Claude äºŒè¿›åˆ¶æ–‡ä»¶çš„è‡ªå®šä¹‰è·¯å¾„ |
| `--help, -h` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶

- **HTTP æ‹¦æˆªå™¨**: åŸºäº Node.js çš„ HTTP/HTTPS æ¨¡å—æ‹¦æˆªæœºåˆ¶
- **æ•°æ®å¤„ç†ç®¡é“**: å°†åŸå§‹ HTTP æ•°æ®è½¬æ¢ä¸ºç»“æ„åŒ–çš„å¯¹è¯æ•°æ®
- **Web æœåŠ¡å™¨**: Express.js + Socket.IO å®ç°å®æ—¶æ•°æ®æ¨é€
- **å‰ç«¯ç•Œé¢**: Vue.js + Arco Design æ„å»ºçš„ç°ä»£åŒ– Web ç•Œé¢

### æ•°æ®æµç¨‹

```
HTTP è¯·æ±‚/å“åº” â†’ æ‹¦æˆªå™¨ â†’ åŸå§‹æ•°æ®(JSONL) â†’ æ•°æ®å¤„ç†å™¨ â†’ ç»“æ„åŒ–æ•°æ® â†’ Web ç•Œé¢å±•ç¤º
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ccdebug/
â”œâ”€â”€ src/                    # CLI å·¥å…·æºç 
â”‚   â”œâ”€â”€ cli.ts             # å‘½ä»¤è¡Œå…¥å£
â”‚   â”œâ”€â”€ interceptor.ts     # HTTP æ‹¦æˆªå™¨
â”‚   â”œâ”€â”€ html-generator.ts  # HTML æŠ¥å‘Šç”Ÿæˆå™¨
â”‚   â””â”€â”€ types.ts           # ç±»å‹å®šä¹‰
â”œâ”€â”€ web/                   # Web ç•Œé¢
â”‚   â”œâ”€â”€ src/               # Vue.js å‰ç«¯æºç 
â”‚   â””â”€â”€ server/            # Express.js åç«¯æœåŠ¡
â”œâ”€â”€ frontend/              # ç‹¬ç«‹ HTML æŠ¥å‘Šå‰ç«¯
â””â”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£
```

## ğŸ”§ å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- npm æˆ– yarn

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/ThinkingBeing/ccdebug.git
cd ccdebug

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# å¼€å‘æ¨¡å¼
npm run dev
```

### æ„å»º Web ç•Œé¢

```bash
# æ„å»ºå‰ç«¯
npm run build:frontend

# å¼€å‘å‰ç«¯
npm run dev:frontend
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### é’ˆå¯¹ccç›®å½•å¯åŠ¨è·Ÿè¸ª
ccdebug --project /path/to/project

### é’ˆå¯¹ccå·¥ä½œç›®å½•å¯åŠ¨webç•Œé¢æŸ¥çœ‹æ—¶é—´çº¿
ccdebug --serve --project /path/to/project --port 3002
```


## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub ä»“åº“](https://github.com/ThinkingBeing/ccdebug)
- [NPM åŒ…](https://www.npmjs.com/package/@myskyline_ai/ccdebug)
